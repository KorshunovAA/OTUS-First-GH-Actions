(()=>{"use strict";async function e(e,n){const r=document.querySelector("#weatherIn"),i=document.querySelector("#weatherInfo");try{let a=await fetch(`https://api.openweathermap.org/data/2.5/weather?units=metric&q=${e}&appid=1684d3bcd6433559b8c400a5ef312ab2`);if(!a.ok){if(404===a.status)throw new Error("Неверно указан город!");if(400===a.status)throw new Error("Вы не указали город! Укажите название города в поле ввода.");throw new Error(`${a.status}: Что-то пошло не так! Обратитесь к разработчику`)}{let e=await a.json();1===n&&t(e,r,0),2===n&&t(e,i,0)}}catch(e){t(null,i,1,e)}}function t(e,t,n,r){if(0===n){const n=document.createElement("p");n.innerHTML="Выбранный город: "+e.name,t.appendChild(n);const r=document.createElement("p");r.innerHTML=`${e.weather[0].description} \nТемпература: ${e.main.temp}&deg;C`,t.appendChild(r);const i=document.createElement("p");i.innerHTML=`        Ощущается как: ${e.main.feels_like}&deg;C\n        Максимальная температура: ${e.main.temp_max}&deg;C\n        Минимальная температура:  ${e.main.temp_min}&deg;C\n        Атмосферное давление: ${e.main.pressure} мм.рт.ст\n        Влажность: ${e.main.humidity}% `,t.appendChild(i)}if(1===n){const e=document.createElement("p");e.innerHTML=r,t.appendChild(e)}}!function(t){t.innerHTML='\n    <pre id="weatherIn"></pre>\n    <input\n        id="myInput"\n        placeholder="Укажите город"\n        required\n        autofocus\n      />\n    <button type="submit" id="userbutton">Получить прогноз</button>\n    <pre id="weatherInfo"></pre>';const n=t.querySelector("#userbutton"),r=t.querySelector("input");let i=0;!async function(){let t,n=await fetch("https://get.geojs.io/v1/ip/geo.json");t=1,e((await n.json()).city,1)}(),n.addEventListener("click",()=>{const t=r.value;r.value="",i=2,e(t,i)})}(document.body)})();